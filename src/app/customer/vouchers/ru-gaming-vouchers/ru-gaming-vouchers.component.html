<!-- <app-breadcrumbs title="Ru Gaming Vouchers" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs> -->

<div class="w-100 mb-4">
  <div class="col-md-12">
    <owl-carousel-o [options]="customOptions">
      <ng-template carouselSlide class="h-20">
        <img src="assets/images/ps-3.jpeg" alt="first slide">
        <div class="carousel-caption d-none "></div>
      </ng-template>
      <ng-template carouselSlide class="h-20">
        <img src="assets/images/ps-2.jpeg" alt="second slide">
        <div class="carousel-caption d-none "></div>
      </ng-template>
      <ng-template carouselSlide class="h-20">
        <img src="assets/images/ps-1.jpeg" alt="third slide">
        <div class="carousel-caption d-none "></div>
      </ng-template>
    </owl-carousel-o>
  </div>
</div>

<div class="container-fluid mt-8">
  <div class="row justify-content-center align-items-center">
    <div class="col-md-5 mb-6">
      <div class="card card-animate rounded-left gradient-bg custom-rounded-card-ps h-100">
        <div class="card-body p-0">
          <div class="row no-gutters h-100">
            <div class="col-6 position-relative">
              <img src="assets/images/img-5.png" alt="Xbox logo" class="img-fluid h-100 w-100 custom-rounded-card-ps">
              <button type="button"
                class="btn btn-outline-secondari-ps offcanvas-btn btn-rounded position-absolute bottom-0 start-50 translate-middle-x mb-3 text-white"
                (click)="openVoucherDetails(buyNowPS, 'Sony-PSN')">Buy Now</button>
            </div>
            <div class="col-6 d-flex align-items-center justify-content-center">
              <div class="text-center">
                <img src="assets/images/psn-logo.png" alt="PlayStation logo" class="img-fluid "
                  style="max-width: 100px;">
                <div class="text-white mt-4 ">
                  <p>Unlock The Ultimate PlayStation Experience! <br>Buy Your PlayStation Voucher Today!!!</p>
                </div>
                <div class="d-flex justify-content-between mt-5 px-3">
                  <img src="assets/images/Plus-PSN.png" alt="PlayStation Plus logo" class="img-fluid mx-3"
                    style="max-width: 50px;">
                  <img src="assets/images/img.png" alt="PlayStation Network logo" class="img-fluid mx-3"
                    style="max-width: 60px;">
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="col-md-5 mb-6">
      <div class="card card-animate rounded-left gradient-bg custom-rounded-card-ps h-100">
        <div class="card-body p-0">
          <div class="row no-gutters h-100">
            <div class="col-6 position-relative">
              <img src="assets/images/img-5.jpg" alt="Xbox logo" class="img-fluid h-100 w-100 custom-rounded-card-ps">
              <button type="button"
                class="btn btn-outline-secondari btn-rounded position-absolute bottom-0 start-50 translate-middle-x mb-3 text-white"
                (click)="openVoucherDetails(buyNowXbox, 'MS-Xbox')">Buy Now</button>
            </div>
            <div class="col-6 d-flex align-items-center justify-content-center">
              <div class="text-center">
                <img src="assets/images/xbox-og-logo.png" alt="Xbox logo" class="img-fluid mx-auto"
                  style="max-width: 200px;">
                <div class="text-white mt-3">
                  <p>Unlock The Ultimate MS-Xbox Experience! <br>Buy Your MS-Xbox Voucher Today!!!</p>
                </div>
                <div class="d-flex justify-content-between mt-5 px-3">
                  <img src="assets/images/Microsoft-Logo-.png" alt="MS-Xbox Plus logo" class="img-fluid mx-6"
                    style="max-width: 150px;">
                  <img src="assets/images/xbox-bag.png" alt="MS-Xbox Network logo" class="img-fluid mx-4 "
                    style="max-width: 60px;">
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #buyNowPS let-offcanvas>

  <div class="offcanvas-header gradient-bg-tp ">
    <h4 class="offcanvas-title text-white">Buy Vouchers</h4>
    <button type="button" class="btn-3 btn-rounded ms-auto text-white"
      (click)="offcanvas.dismiss('Cross click')"></button>
  </div>
  <div class="offcanvas-body gradient-bg-cv">
    <form class="buyNowForm" [formGroup]="buyNowForm">
      <div class="col-md-12 d-flex align-items-center justify-content-center">
        <div class="mb-3">
          <img src="assets/images/psn-logo.png" alt="PlayStation logo" class="img-fluid mt-3 mb-3"
            style="max-width: 100px;">
        </div>
      </div>
      <div class="mb-3">
        <div class="col-12">
          <label for="productSelect" class="form-label text-white">Product</label>
          <select id="productSelect" (change)="onProductChange($event)" [disabled]="!selectedBrand"
            class="form-select rounded-pill" formControlName="product">
            <option value="" class="text-white">--Select Product--</option>
            <option *ngFor="let product of productList" [value]="product | json">
              {{ product.name }}: {{ product.price }} &#8377;
            </option>
          </select>
        </div>
      </div>
      <div class="mb-3" *ngIf="selectedProduct">
        <label for="quantityInput" class="form-label text-white">Quantity</label>
        <div class="input-group col-12">
          <input type="number" class="form-control rounded-pill" placeholder="Quantities" [value]="quantity"
            formControlName="quantity" (input)="updateTotalPrice()">
        </div>
      </div>
      <!-- <div class="mb-3" *ngIf="selectedProduct">
        <div class="col-12 invesible-input">
          <label for="priceDisplay" class="form-label text-white">Denomination</label>
          <input 
            class="form-control single-line-textarea rounded-4" 
            [value]="selectedPrice" 
            id="priceDisplay" 
            formControlName="denomination" 
            readonly>
        </div>
      </div> -->
      <div class="mb-3" *ngIf="selectedProduct">
        <div class="col-12">
          <label for="totalPriceDisplay" class="form-label text-white">Total Price</label>
          <input class="form-control single-line-textarea rounded-4" [value]="totalPrice" id="totalPriceDisplay"
            readonly>
        </div>
      </div>

      <div class="mb-3" *ngIf="purchaseNow">
        <div class="card">
          <div class="card-body position-relative">
            <h5 class="mb-3">Payment Method</h5>
            <div class="vstack gap-2">
              <div *ngFor="let card of bankcards" class="form-check card-radio">
                <input id="listGroupRadioGrid{{card.id}}" type="radio" class="form-check-input" name="paymentOption"
                  [value]="card.card" formControlName="paymentOption">
                <label class="form-check-label" for="listGroupRadioGrid{{card.id}}">
                  <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                      <div class="avatar-xs">
                        <div class="avatar-title bg-success-subtle text-success fs-18 rounded">
                          <i class="ri-{{card.icon}}"></i>
                        </div>
                      </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                      <h6 class="mb-1">{{card.card}}</h6>
                    </div>
                  </div>
                </label>
              </div>
            </div>
            <button type="button" class="btn btn-outline-secondari-ps btn-rounded text-white w-100 mt-3"
              id="confirm-btn" (click)="onSubmit()">Proceed To Payment</button>
            <div id="notification-warn" class="position-absolute top-0 start-0 end-0 d-none">
              <div class="alert alert-warning" role="alert">
                Select at least one item
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="text-center px-3 py-2 mt-4" *ngIf="selectedProduct">
        <button type="button" class="btn btn-outline-secondari-ps btn-rounded text-white" (click)="onPurchaseNow()"
          *ngIf="showPurchaseButton">
          Purchase Now
        </button>
      </div>

    </form>
    <div class="col-12">
      <div class="d-flex justify-content-between ">
        <img src="assets/images/Plus-PSN.png" alt="PlayStation Plus logo" class="img-fluid img-bottom-left"
          style="max-width: 70px;">
        <img src="assets/images/img.png" alt="PlayStation Network logo" class="img-fluid img-bottom-right"
          style="max-width: 80px;">
      </div>
    </div>
  </div>


</ng-template>


<ng-template #buyNowXbox let-offcanvas>
  <div class="offcanvas-header gradient-bg-cv">
    <h4 class="offcanvas-title text-white">Buy Vouchers</h4>
    <button type="button" class="btn-3 offcanvas-btn btn-rounded ms-auto text-white"
      (click)="offcanvas.dismiss('Cross click')"></button>
  </div>

  <div class="offcanvas-body gradient-bg-cv">
    <form class="buyNowForm" [formGroup]="buyNowForm">
      <div class="col-md-12 d-flex align-items-center justify-content-center">
        <div class="mb-3">
          <img src="assets/images/xbox-og-logo.png" alt="Xbox logo" class="img-fluid mt-3 mb-3"
            style="max-width: 200px;">
        </div>
      </div>
      <div class="mb-3">
        <div class="col-12">
          <label for="productSelect" class="form-label text-white">Product</label>
          <select id="productSelect" (change)="onProductChange($event)" [disabled]="!selectedBrand"
            class="form-select rounded-pill" formControlName="product">
            <option value="" class="text-white">--Select Product--</option>
            <option *ngFor="let product of productList" [value]="product | json">
              {{ product.name }}: {{ product.price }} &#8377;
            </option>
          </select>
        </div>
      </div>
      <div class="mb-3" *ngIf="selectedProduct">
        <label for="quantityInput" class="form-label text-white">Quantity</label>
        <div class="input-group col-12">
          <input type="number" class="form-control rounded-pill" placeholder="Quantities" [value]="quantity"
            formControlName="quantity" (input)="updateTotalPrice()">
        </div>
      </div>
      <div class="mb-3" *ngIf="selectedProduct">
        <div class="col-12">
          <label for="totalPriceDisplay" class="form-label text-white">Total Price</label>
          <input class="form-control single-line-textarea rounded-4" [value]="totalPrice" id="totalPriceDisplay"
            readonly>
        </div>
      </div>

      <div class="mb-3" *ngIf="purchaseNow">
        <div class="card">
          <div class="card-body position-relative">
            <h5 class="mb-3">Payment Method</h5>
            <div class="vstack gap-2">
              <div *ngFor="let card of bankcards" class="form-check card-radio">
                <input id="listGroupRadioGrid{{card.id}}" type="radio" class="form-check-input" name="paymentOption"
                  [value]="card.card" formControlName="paymentOption">
                <label class="form-check-label" for="listGroupRadioGrid{{card.id}}">
                  <div class="d-flex align-items-center">
                    <div class="flex-shrink-0">
                      <div class="avatar-xs">
                        <div class="avatar-title bg-success-subtle text-success fs-18 rounded">
                          <i class="ri-{{card.icon}}"></i>
                        </div>
                      </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                      <h6 class="mb-1">{{card.card}}</h6>
                    </div>
                  </div>
                </label>
              </div>
            </div>
            <button type="button" class="btn btn-outline-secondari-ps btn-rounded text-white w-100 mt-3"
              id="confirm-btn" (click)="onSubmit()">Proceed To Payment</button>
            <div id="notification-warn" class="position-absolute top-0 start-0 end-0 d-none">
              <div class="alert alert-warning" role="alert">
                Select at least one item
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="text-center px-3 py-2 mt-4" *ngIf="selectedProduct">
        <button type="button" class="btn btn-outline-secondari-ps btn-rounded text-white" (click)="onPurchaseNow()"
          *ngIf="showPurchaseButton">
          Purchase Now
        </button>
      </div>

    </form>
    <div class="col-12">
      <div class="d-flex justify-content-between ">
        <img src="assets/images/Microsoft-Logo-.png" alt="MS-Xbox Plus logo" class="img-fluid img-bottom-left"
          style="max-width: 150px;">
        <img src="assets/images/xbox-bag.png" alt="MS-Xbox Network logo" class="img-fluid img-bottom-right"
          style="max-width: 60px;">
      </div>
    </div>
  </div>
</ng-template>