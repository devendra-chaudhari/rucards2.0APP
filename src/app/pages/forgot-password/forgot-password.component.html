<div class="d-flex justify-content-center flex-column px-3">
    <div class="row" *ngIf="!userFound">
        <div class="col-12">
            <label for="mobile" class="form-label">Mobile No <span class="text-danger">*</span></label>
            <input type="text" class="form-control rounded-pill fw-semibold" placeholder="Enter Registered Mobile No"
                   name="mobile" id="mobile" [(ngModel)]="mobile" maxlength="10" appNumberOnly>
            <div *ngIf="requiredMobile" class="text-danger">
                <div>Mobile number is required</div>
            </div>
            <div *ngIf="invalidMobile" class="text-danger">
                <div>Invalid mobile number</div>
            </div>
        </div>
    </div>
    <div class="text-center mt-3" *ngIf="!userFound">
        <button class="btn btn-primary fs-16 w-50 btn-rounded" (click)="getUsers()">Submit</button>
    </div>
    <form [formGroup]="forgotPasswordForm" *ngIf="userFound">
        <div class="row">
            <div class="col-12">
                <label for="username" class="form-label">User ID <span class="text-danger">*</span></label>
                <select type="text" class="form-select rounded-pill fw-semibold" id="username"
                        formControlName="username" maxlength="9">
                    <option value="" disabled>Select Username</option>
                    <option *ngFor="let item of usernameData" value="{{item.username}}">{{item.username}}</option>
                </select>
                <div *ngIf="isSubmitted && ff['username'].errors" class="text-danger">
                    <div *ngIf="ff['username'].errors['required']">Username is required</div>
                    <div *ngIf="ff['username'].errors['pattern']">Invalid Username</div>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <button class="btn btn-primary fs-16 w-50 btn-rounded" (click)="submit()" *ngIf="!needOtp">Send OTP</button>
        </div>
    </form>
    <div class="mt-3" *ngIf="needOtp">
        <label for="mobile_otp" class="form-label">OTP <span class="text-danger">*</span></label>
        <input class="form-control rounded-pill fw-semibold" appNumberOnly maxlength="6"
               placeholder="Enter OTP" id="mobile_otp" name="mobile_otp" [(ngModel)]="otpData.otp">
    </div>
    <div class="my-2" *ngIf="needOtp">
        <div class="d-flex justify-content-between align-items-center">
            <span class="alert alert-success rounded-pill py-1">{{otp_msg | titlecase}}</span>
            <div>
                <a *ngIf="!resendOtp"
                   (click)="resendMobileOtp()"
                   class="text-secondary cursor-pointer">Resend</a>
                <countdown *ngIf="resendOtp" #cd [config]="config"
                           (event)="handleEvent($event)"></countdown>
            </div>
        </div>
    </div>
    <div class="text-center mb-2">
        <button class="btn btn-primary fs-16 w-50 btn-rounded" [disabled]="otpData.otp == ''" (click)="verifyOtp()"
                *ngIf="needOtp">
            Submit
        </button>
    </div>
</div>
